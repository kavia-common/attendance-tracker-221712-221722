{"is_source_file": true, "format": "Python", "description": "This file contains data access and business logic for managing users, classes, students, and attendance in an attendance tracking system. It includes functions for creating, retrieving, and updating records, as well as publishing events via an SSE broker.", "external_files": ["./db"], "external_methods": ["execute_query", "sse_broker.publish"], "published": ["upsert_user", "get_user_by_email", "create_class", "list_classes_for_teacher", "add_student_to_class", "get_class_members", "mark_attendance", "get_attendance_for_class", "get_attendance_summary_for_user"], "classes": [], "methods": [{"name": "Dict[str,Any] upsert_user(email: str, name: str, role: str)", "description": "Creates or updates a user in the database and returns the user data.", "scope": "", "scopeKind": ""}, {"name": "Optional[Dict[str,Any]] get_user_by_email(email: str)", "description": "Fetches a user record from the database based on email.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] create_class(name: str, teacher_id: int)", "description": "Creates a new class and publishes a class creation event.", "scope": "", "scopeKind": ""}, {"name": "List[Dict[str,Any]] list_classes_for_teacher(teacher_id: int)", "description": "Lists all classes managed by a specific teacher.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] add_student_to_class(class_id: int, user_id: int)", "description": "Adds a student to a class and publishes an event.", "scope": "", "scopeKind": ""}, {"name": "List[Dict[str,Any]] get_class_members(class_id: int)", "description": "Retrieves the list of students in a specific class.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] mark_attendance(class_id: int, user_id: int, status: str)", "description": "Records attendance status for a student in a class and broadcasts an event.", "scope": "", "scopeKind": ""}, {"name": "List[Dict[str,Any]] get_attendance_for_class(class_id: int, limit: int = 100)", "description": "Retrieves recent attendance records for a class.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] get_attendance_summary_for_user(user_id: int)", "description": "Provides attendance status counts for a specific user.", "scope": "", "scopeKind": ""}], "calls": ["execute_query", "sse_broker.publish"], "search-terms": ["attendance_management", "user_operations", "class_management", "attendance_records", "event_broadcasting"], "state": 2, "file_id": 8, "knowledge_revision": 31, "git_revision": "4e146841d7e8e67865c2fa103a9e85ed8a2eef90", "revision_history": [{"17": ""}, {"31": "4e146841d7e8e67865c2fa103a9e85ed8a2eef90"}], "ctags": [{"_type": "tag", "name": "add_student_to_class", "path": "/home/kavia/workspace/code-generation/attendance-tracker-221712-221722/firebase_functions/app/models.py", "pattern": "/^def add_student_to_class(class_id: int, user_id: int) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(class_id: int, user_id: int)"}, {"_type": "tag", "name": "create_class", "path": "/home/kavia/workspace/code-generation/attendance-tracker-221712-221722/firebase_functions/app/models.py", "pattern": "/^def create_class(name: str, teacher_id: int) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(name: str, teacher_id: int)"}, {"_type": "tag", "name": "get_attendance_for_class", "path": "/home/kavia/workspace/code-generation/attendance-tracker-221712-221722/firebase_functions/app/models.py", "pattern": "/^def get_attendance_for_class(class_id: int, limit: int = 100) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "function", "signature": "(class_id: int, limit: int = 100)"}, {"_type": "tag", "name": "get_attendance_summary_for_user", "path": "/home/kavia/workspace/code-generation/attendance-tracker-221712-221722/firebase_functions/app/models.py", "pattern": "/^def get_attendance_summary_for_user(user_id: int) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(user_id: int)"}, {"_type": "tag", "name": "get_class_members", "path": "/home/kavia/workspace/code-generation/attendance-tracker-221712-221722/firebase_functions/app/models.py", "pattern": "/^def get_class_members(class_id: int) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "function", "signature": "(class_id: int)"}, {"_type": "tag", "name": "get_user_by_email", "path": "/home/kavia/workspace/code-generation/attendance-tracker-221712-221722/firebase_functions/app/models.py", "pattern": "/^def get_user_by_email(email: str) -> Optional[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "function", "signature": "(email: str)"}, {"_type": "tag", "name": "list_classes_for_teacher", "path": "/home/kavia/workspace/code-generation/attendance-tracker-221712-221722/firebase_functions/app/models.py", "pattern": "/^def list_classes_for_teacher(teacher_id: int) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "function", "signature": "(teacher_id: int)"}, {"_type": "tag", "name": "mark_attendance", "path": "/home/kavia/workspace/code-generation/attendance-tracker-221712-221722/firebase_functions/app/models.py", "pattern": "/^def mark_attendance(class_id: int, user_id: int, status: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(class_id: int, user_id: int, status: str)"}, {"_type": "tag", "name": "upsert_user", "path": "/home/kavia/workspace/code-generation/attendance-tracker-221712-221722/firebase_functions/app/models.py", "pattern": "/^def upsert_user(email: str, name: str, role: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(email: str, name: str, role: str)"}], "hash": "6b68bcee3e623519e43cecf414e621aa", "format-version": 4, "code-base-name": "firebase_functions", "filename": "firebase_functions/app/models.py"}