{"is_source_file": true, "format": "Python", "description": "This file contains data models and functions for managing users, classes, and attendance in an attendance tracking system. It includes CRUD operations, event publishing, and data retrieval related to users, classes, and attendance records.", "external_files": ["./db"], "external_methods": ["execute_many", "execute_query", "sse_broker.publish"], "published": ["upsert_user", "get_user_by_email", "create_class", "list_classes_for_teacher", "add_student_to_class", "get_class_members", "mark_attendance", "get_attendance_for_class", "get_attendance_summary_for_user"], "classes": [], "methods": [{"name": "Dict[str,Any] upsert_user(email: str, name: str, role: str)", "description": "Creates or updates a user record in the database and returns the user data as a dictionary.", "scope": "", "scopeKind": ""}, {"name": "Optional[Dict[str,Any]] get_user_by_email(email: str)", "description": "Retrieves a user record by email address.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] create_class(name: str, teacher_id: int)", "description": "Creates a new class record, publishes an event, and returns the class data.", "scope": "", "scopeKind": ""}, {"name": "List[Dict[str,Any]] list_classes_for_teacher(teacher_id: int)", "description": "Lists all classes managed by a specific teacher.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] add_student_to_class(class_id: int, user_id: int)", "description": "Adds a student to a class and publishes an event.", "scope": "", "scopeKind": ""}, {"name": "List[Dict[str,Any]] get_class_members(class_id: int)", "description": "Returns a list of students in a specific class.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] mark_attendance(class_id: int, user_id: int, status: str)", "description": "Records attendance for a student in a class, publishes an event, and returns the attendance record.", "scope": "", "scopeKind": ""}, {"name": "List[Dict[str,Any]] get_attendance_for_class(class_id: int, limit: int = 100)", "description": "Fetches recent attendance events for a class.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] get_attendance_summary_for_user(user_id: int)", "description": "Provides a summary of attendance status counts for a user.", "scope": "", "scopeKind": ""}], "calls": ["execute_query", "sse_broker.publish"], "search-terms": ["models.py", "attendance", "class management", "user management", "attendance record", "class creation", "schedule tracking"], "state": 2, "file_id": 8, "knowledge_revision": 17, "git_revision": "", "ctags": [{"_type": "tag", "name": "add_student_to_class", "path": "/home/kavia/workspace/code-generation/attendance-tracker-221712-221722/firebase_functions/app/models.py", "pattern": "/^def add_student_to_class(class_id: int, user_id: int) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(class_id: int, user_id: int)"}, {"_type": "tag", "name": "create_class", "path": "/home/kavia/workspace/code-generation/attendance-tracker-221712-221722/firebase_functions/app/models.py", "pattern": "/^def create_class(name: str, teacher_id: int) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(name: str, teacher_id: int)"}, {"_type": "tag", "name": "get_attendance_for_class", "path": "/home/kavia/workspace/code-generation/attendance-tracker-221712-221722/firebase_functions/app/models.py", "pattern": "/^def get_attendance_for_class(class_id: int, limit: int = 100) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "function", "signature": "(class_id: int, limit: int = 100)"}, {"_type": "tag", "name": "get_attendance_summary_for_user", "path": "/home/kavia/workspace/code-generation/attendance-tracker-221712-221722/firebase_functions/app/models.py", "pattern": "/^def get_attendance_summary_for_user(user_id: int) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(user_id: int)"}, {"_type": "tag", "name": "get_class_members", "path": "/home/kavia/workspace/code-generation/attendance-tracker-221712-221722/firebase_functions/app/models.py", "pattern": "/^def get_class_members(class_id: int) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "function", "signature": "(class_id: int)"}, {"_type": "tag", "name": "get_user_by_email", "path": "/home/kavia/workspace/code-generation/attendance-tracker-221712-221722/firebase_functions/app/models.py", "pattern": "/^def get_user_by_email(email: str) -> Optional[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "function", "signature": "(email: str)"}, {"_type": "tag", "name": "list_classes_for_teacher", "path": "/home/kavia/workspace/code-generation/attendance-tracker-221712-221722/firebase_functions/app/models.py", "pattern": "/^def list_classes_for_teacher(teacher_id: int) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "function", "signature": "(teacher_id: int)"}, {"_type": "tag", "name": "mark_attendance", "path": "/home/kavia/workspace/code-generation/attendance-tracker-221712-221722/firebase_functions/app/models.py", "pattern": "/^def mark_attendance(class_id: int, user_id: int, status: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(class_id: int, user_id: int, status: str)"}, {"_type": "tag", "name": "upsert_user", "path": "/home/kavia/workspace/code-generation/attendance-tracker-221712-221722/firebase_functions/app/models.py", "pattern": "/^def upsert_user(email: str, name: str, role: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(email: str, name: str, role: str)"}], "hash": "0f54ea60998c4eae1f066e69e8bbb810", "format-version": 4, "code-base-name": "firebase_functions", "filename": "firebase_functions/app/models.py", "revision_history": [{"17": ""}]}